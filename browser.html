<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/beamng.css">
    <script src="js/jquery.js"></script>
    <script src="js/minimal.js"></script>
</head>
<body style="margin: 0;height:100%;min-height:100%;">


<div style="background-color:#cccccc;height:25px;vertical-align:middle;width:100%;border-bottom:1px solid black;">
    <button type="button" onclick="window.location.href='file:///html/mainmenu.html'" id="back">Main Menu</button>

    <button type="button" onclick="back();" id="back">Back</button>
    <button type="button" onclick="forward();" id="forward">Forward</button>
    <button type="button" onclick="refresh();" id="refresh">Refresh</button>

    <img src="http://www.beamng.com/favicon.ico" alt="Web" id="webImg" style="vertical-align: middle;"></img>
    <input type="url" id="address" value="http://beamng.com" size="60">
    <button type="button" onclick="go();" id="refresh">Go</button>

    <button type="button" class="cefdev" onclick="javascript:location.reload();" id="refresh">ReloadUI</button>
</div>

<iframe src="http://beamng.com" id="iframe" frameborder="0" style="position:fixed;top:26px;bottom:0px;width:100%;">
  <p>Your browser does not support iframes.</p>
</iframe>

<script type="text/javascript">
function back()
{
        //goes back a page and updates the favicon.ico and iframe
        window.history.back();
        document.getElementById("address").value=document.getElementById("iframe").src;
        updateImg();
}

function forward()
{
        window.history.forward();
        document.getElementById("address").value=document.getElementById("iframe").src;
        updateImg();
}

function go()
{
        document.getElementById("iframe").src=document.getElementById("address").value
        updateImg();
}

function refresh()
{        
        /*refreshing by making the address bar equal the iframe, not the other way around because we don't care about the 
        Address bar. We want to refresh the page we are on now.
        */
        document.getElementById("address").value=document.getElementById("iframe").src;
        go();
}

function updateImg()
{
        //getting the root url and finding favicon.ico
        var URL=document.getElementById("address").value ;
        var subURL=URL.split("/");
        var rootURL=subURL[2];
        document.getElementById("webImg").src = "http://" + rootURL + "/favicon.ico";
}

$( document ).ready(function() {
    function fixIframeHeight() {
        var newHeight = $(window).height();
        var buffer = 26;
        var newIframeHeight = newHeight - buffer;
        $('#iframe').css('height',newIframeHeight);
    }
    $( window ).resize(fixIframeHeight);
    fixIframeHeight();
});
</script>

</body>
</html>
